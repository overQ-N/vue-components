<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .box {
        width: 600px;
        height: 600px;
        background: pink;
      }
    </style>
  </head>
  <body>
    <div class="box"></div>
    <input type="text" class="input" onclick="click"  placeholder="请不要输入">
  </body>
  <script>
    const box = document.querySelector('.box');
    const input = document.querySelector('.input');
    console.log(input)
    input.addEventListener('input',throttle(handleInput,2000))
    function handleInput(){
      console.log('执行了')
    }
  //  function click(){
  //     console.log('执行了')
  //   }
    function throttle(func,SpaceTime=500){
      var lastTime = 0
      console.log(1)
      return function(){
        const nowTime = + new Date()
        console.log(nowTime)
        if(nowTime-lastTime>SpaceTime){
          func()
          lastTime = nowTime
        }
      }
    }











    box.addEventListener('mousemove',debouce(move,500) );
    function move() {
      console.log('hover');
    }
    function debouce(func, timeout) {
      let timer = null;
      return function() {
        if (timer) {
          clearTimeout(timer);
        }
        timer = setTimeout(() => {
          func.apply(this,arguments)
        }, timeout);
      };
    }

    Array.prototype.customFilter = function(callback,thisArg){
      if(typeof this == undefined){
        throw new TypeError('this is null or undefined')
      }
      if(typeof callback !== 'function'){
        throw new TypeError(callback+'is not a function')
      }
      const o = Object(this)
      const len = o.length>>>0
      const res = []
      for(var i =0;i<len;i++){
        console.log(thisArg,'thisArg');
        if(callback.call(thisArg,o[i],i,o)){
          res.push(o[i])
        }
      }
      return res
    }
    Array.prototype.customMap = function(callback,thisArg){
      if(this==undefined){
        throw new TypeError('this is null or undefined')
      }
      if(typeof callback!=='function'){
        throw new TypeError(callback+'is not a function')
      }
      const o = Object(this)
      const len = o.length>>>0
      const res = []
      for(var i=0;i<len;i++){
        res.push(callback.call(thisArg,o[i],i,o))
      }
      return res
    }
    Array.prototype.customForEach = function(callback,thisArg){
      if(this==undefined){
        throw new TypeError('this is null or undefined')
      }
      if(typeof callback!=='function'){
        throw new TypeError(callback+'is not a function')
      }
      const o = Object(this)
      const len = o.length>>>0
      let k = 0
      while(k<len){
        if(k in o){
          o[k] = callback.call(thisArg,o[k],k,o)
        }
        k++
      }
      // for(var i=0;i<len;i++){
      //   callback.call(thisArg,o[i],i,o)
      // }
    }
    const arr = [1,3,4,5,6,7,8,8,9,10]
    console.log(arr.customFilter(item=>item%2===0));
    console.log(arr.customMap(item=>item*2));
    console.log(arr.customForEach(item=>item*3));
    console.log(arr);
    const obj = {
      1     : 2,
      '11'  : 20,
      22    : 11,
      sfjsjs: 666
    }
  </script>
</html>
